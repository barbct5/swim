<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Module swim_broadcasts</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module swim_broadcasts</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>This module is responsible for maintaining membership updates and user   
provided events along with their state as a part of the   
infection-style dissemination component of the SWIM protocol.
<p>Copyright Â© 2015</p>

<p><b>Version:</b> Jul 2 2015 19:35:41</p>

<h2><a name="description">Description</a></h2><p>This module is responsible for maintaining membership updates and user   
provided events along with their state as a part of the   
infection-style dissemination component of the SWIM protocol.</p>
  
   <h3><a name="Infection-Style_Dissemination">Infection-Style Dissemination</a></h3><p>   
As an alternative to IP Multicast   
or a point-to-point messaging scheme the SWIM protocol   
disseminates membership updates by piggybacking on messages sent   
as a part of the failure detection protcool. The implementation   
does not generate any extra packets.</p>
  
   Here, <code>swim_broadcasts</code> maintains the buffer of recent membership
   updates along with a count for each event. The local count
   specifies the number of times the event has been piggybacked so
   far by this member and is used to choose which events to piggyback
   next. Each event is piggybacked at most <code>Retransmit * log(N +
   1)</code> times. If the size of events in the buffer is larger
   than the maximum number of events that can be piggybacked on a
   single PING or ACK, events that bave been gossiped fewer times are
   preferred. See <a href="swim_messages.html#event_size_limit-0"><code>swim_messages:event_size_limit/0</code></a> for more
   information on how this limit is derived. This is needed as the
   protocol period is fixed and the rater of membership changes might
   temporarily overwhelm the speed of dissemination. Preferring
   "younger" events under such circumstances ensures that tall
   membership changes infect at least a few members - when the
   membership change inject rate quiesces, these changes will
   propagate through the rest of the gossip group.
  
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-encode">encode()</a></h3>
<p><tt>encode() = fun((<a href="#type-swim_event">swim_event()</a>) -&gt; binary())</tt></p>


<h3 class="typedecl"><a name="type-swim_broadcast">swim_broadcast()</a></h3>
<p><b>abstract datatype</b>: <tt>swim_broadcast()</tt></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#new-1">new/1</a></td><td>Creates a new Swim Broadcasts.</td></tr>
<tr><td valign="top"><a href="#peek-1">peek/1</a></td><td>Peek at all Swim Events waiting to be broadcast.</td></tr>
<tr><td valign="top"><a href="#pop-4">pop/4</a></td><td>Returns encoded Swim Events to be broadcast to the rest of the peers.</td></tr>
<tr><td valign="top"><a href="#push-2">push/2</a></td><td>Adds a Swim Event to be broadcast.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="new-1">new/1</a></h3>
<div class="spec">
<p><tt>new(Retransmit::pos_integer()) -&gt; <a href="#type-swim_broadcast">swim_broadcast()</a></tt><br></p>
</div><p>Creates a new Swim Broadcasts. Retransmit is a scaling factor for the
  number of times an event is broadcast to ensure quick and complete
  dissemination. See <a href="#pop-4"><code>pop/4</code></a> on how Retransmit is used.</p>

<h3 class="function"><a name="peek-1">peek/1</a></h3>
<div class="spec">
<p><tt>peek(?MODULE::<a href="#type-swim_broadcast">swim_broadcast()</a>) -&gt; [<a href="#type-swim_event">swim_event()</a>]</tt><br></p>
</div><p>Peek at all Swim Events waiting to be broadcast.</p>

<h3 class="function"><a name="pop-4">pop/4</a></h3>
<div class="spec">
<p><tt>pop(SizeLimit::pos_integer(), NumMembers::pos_integer(), Encode::<a href="#type-encode">encode()</a>, State::<a href="#type-swim_broadcast">swim_broadcast()</a>) -&gt; {[binary()], <a href="#type-swim_broadcast">swim_broadcast()</a>}</tt><br></p>
</div><p><p>Returns encoded Swim Events to be broadcast to the rest of the peers.</p>
 
  Events to be broadcast are determined by the number of the peers as well as
  the size limitation provided by SizeLimit. Membership events always take
  precedence over user events. Events are broadcast up to a max of
  <code>Retransmit * log(NumMembers + 1)</code>. If the number of events
  exceeds the maximum number of events dictated by SizeLimit, events that have
  been broadcast fewer times are preferred. This is needed as the rate of
  incoming events, i.e. membership changes, might temporarily overwhelm
  the speed of dissemination.
  Preferring younger events ensures that all events
  infect at least a few members. Events that have exceeded
  their retransmit limit are removed from the broadcasts. Events that are
  returned have their number of retransmissions incremented by 1.</p>

<h3 class="function"><a name="push-2">push/2</a></h3>
<div class="spec">
<p><tt>push(Event::<a href="#type-swim_event">swim_event()</a>, State::<a href="#type-swim_broadcast">swim_broadcast()</a>) -&gt; <a href="#type-swim_broadcast">swim_broadcast()</a></tt><br></p>
</div><p>Adds a Swim Event to be broadcast.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Jul 2 2015, 19:35:41.</i></p>
</body>
</html>
